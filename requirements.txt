# Base packages
streamlit
opencv-python-headless
numpy

# --- Step 1: Install PyTorch and its dependencies ---
# Use a recent, stable CPU version of PyTorch for Python 3.10
--extra-index-url https://download.pytorch.org/whl/cpu
torch==2.1.2+cpu
torchvision==0.16.2+cpu

# --- Step 2: Install Detectron2's other dependencies ---
fvcore
iopath
pycocotools

# --- Step 3: Install Detectron2 without build isolation ---
# This flag forces pip to use the already-installed torch,
# preventing the "ModuleNotFoundError: No module named 'torch'" error during setup.
--no-build-isolation
detectron2 @ git+https://github.com/facebookresearch/detectron2.git
