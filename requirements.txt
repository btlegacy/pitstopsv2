streamlit
opencv-python-headless
numpy

# --- Group 1: Install PyTorch and its dependencies first ---
# Using --extra-index-url is a reliable way to get the correct PyTorch version.
--extra-index-url https://download.pytorch.org/whl/cpu
torch==1.10.1+cpu
torchvision==0.11.2+cpu

# --- Group 2: Install Detectron2's other dependencies ---
# These are needed before Detectron2 itself is built.
fvcore>=0.1.5,<0.1.6
iopath>=0.1.7,<0.1.10
pycocotools

# --- Group 3: Build and install Detectron2 from source ---
# By placing this last, we ensure all its dependencies (especially torch) are already installed.
detectron2 @ git+https://github.com/facebookresearch/detectron2.git
